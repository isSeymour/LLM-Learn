<p align="center" width="100%">
<img src="https://i.postimg.cc/xTpWgq3L/pixiu-logo.png"  width="100%" height="100%">
</p>
<div>
<div align="left">
    <a target='_blank'>Qianqian Xie<sup>1</sup></span>&emsp;
    <a target='_blank'>Weiguang Han<sup>2</sup></span>&emsp;
    <a target='_blank'>Zhengyu Chen<sup>2</sup></span>&emsp;
    <a target='_blank'>Ruoyu Xiang<sup>1</sup></a>&emsp;
    <a target='_blank'>Xiao Zhang<sup>1</sup></a>&emsp;
    <a target='_blank'>Yueru He<sup>1</sup></a>&emsp;
    <a target='_blank'>Mengxi Xiao<sup>2</sup></a>&emsp;
    <a target='_blank'>Dong Li<sup>2</sup></a>&emsp;
    <a target='_blank'>Yongfu Dai<sup>7</sup></a>&emsp;
    <a target='_blank'>Duanyu Feng<sup>7</sup></a>&emsp;
    <a target='_blank'>Yijing Xu<sup>1</sup></a>&emsp;
    <a target='_blank'>Haoqiang Kang<sup>5</sup></a>&emsp;
    <a target='_blank'>Ziyan Kuang<sup>12</sup></a>&emsp;
    <a target='_blank'>Chenhan Yuan<sup>3</sup></a>&emsp;
    <a target='_blank'>Kailai Yang<sup>3</sup></a>&emsp;
    <a target='_blank'>Zheheng Luo<sup>3</sup></a>&emsp;
    <a target='_blank'>Tianlin Zhang<sup>3</sup></a>&emsp;
    <a target='_blank'>Zhiwei Liu<sup>3</sup></a>&emsp;
    <a target='_blank'>Guojun Xiong<sup>10</sup></a>&emsp;
    <a target='_blank'>Zhiyang Deng<sup>9</sup></a>&emsp;
    <a target='_blank'>Yuechen Jiang<sup>9</sup></a>&emsp;
    <a target='_blank'>Zhiyuan Yao<sup>9</sup></a>&emsp;
    <a target='_blank'>Haohang Li<sup>9</sup></a>&emsp;
    <a target='_blank'>Yangyang Yu<sup>9</sup></a>&emsp;
    <a target='_blank'>Gang Hu<sup>8</sup></a>&emsp;
    <a target='_blank'>Jiajia Huang<sup>11</sup></a>&emsp;
    <a target='_blank'>Xiao-Yang Liu<sup>5</sup></a>&emsp;
    <a href='https://warrington.ufl.edu/directory/person/12693/' target='_blank'>Alejandro Lopez-Lira<sup>4</sup></a>&emsp;
    <a target='_blank'>Benyou Wang<sup>6</sup></a>&emsp;
    <a target='_blank'>Yanzhao Lai<sup>13</sup></a>&emsp;
    <a target='_blank'>Hao Wang<sup>7</sup></a>&emsp;
    <a target='_blank'>Min Peng<sup>2*</sup></a>&emsp;
    <a target='_blank'>Sophia Ananiadou<sup>3</sup></a>&emsp;
    <a href='' target='_blank'>Jimin Huang<sup>1</sup></a>
</div>
<br />

<div align="left">
    <sup>1</sup>The Fin AI&emsp;
    <sup>2</sup>Wuhan University&emsp;
    <sup>3</sup>The University of Manchester&emsp;
    <sup>4</sup>University of Florida&emsp;
    <sup>5</sup>Columbia University&emsp;
    <sup>6</sup>The Chinese University of Hong Kong, Shenzhen&emsp;
    <sup>7</sup>Sichuan University&emsp;
    <sup>8</sup>Yunnan University&emsp;
    <sup>9</sup>Stevens Institute of Technology&emsp;
    <sup>10</sup>Stony Brook University&emsp;
    <sup>11</sup>Nanjin Audit University&emsp;
    <sup>12</sup>Jiangxi Normal University&emsp;
    <sup>13</sup>Southwest Jiaotong University
</div>
<br />

<div align="left">
    <img src='https://i.postimg.cc/CLtkBwz7/57-EDDD9-FB0-DF712-F3-AB627163-C2-1-EF15655-13-FCA.png' alt='Wuhan University Logo' height='50px'>&emsp;
    <img src='https://assets.manchester.ac.uk/corporate/images/design/logo-university-of-manchester.png' alt='Manchester University Logo' height='50px'>&emsp;
    <img src='https://i.postimg.cc/XY1s2RHD/University-of-Florida-Logo-1536x864.jpg' alt='University of Florida Logo' height='50px'>&emsp;
    <img src='https://admissions.ucr.edu/sites/default/files/styles/form_preview/public/2020-07/ucr-education-logo-columbia-university.png?itok=-0FD6Ma2' alt='Columbia University Logo' height='50px'>&emsp;
    <img src='https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQeMTMkJVT6g36_LN-8qJ4nMvgT3vM5spUHV3ITRYbym1CEg4Af5Shlp5jX2sWtDFtTK9I&usqp=CAU' alt='HK University (shenzhen) Logo' height='50px'>&emsp;
    <img src='https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcToJAAiyqxfFuwro5N9Um9TB5LDkiJNKF3hMMQp3pfC0A&s' alt='Sichuan University' height='50px'>&emsp;
    <img src='https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRbx3AQWiMhxwOvFb7r1PH-h_i5-b3H9xsGVKnkQwbFlA&s' alt='Yunnan University' height='50px'>&emsp;
    <img src='https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRS_o8HItSOTkg5M75N59D6V5u9qg7QYfBa_ITxdfEfwQ&s' alt='Stevens Insititute of Technology' height='50px'>&emsp;
    <img src='https://www.stonybrook.edu/sbu-brand/_images/2015/10/logo_stacked_vert.jpg' alt='Stony Brook University' height='50px'>&emsp;
    <img src='https://upload.wikimedia.org/wikipedia/en/9/9c/Nanjing_Audit_University_logo.png' alt='Nanjing Audit University' height='50px'>&emsp;
    <img src='https://upload.wikimedia.org/wikipedia/en/thumb/c/c5/Jiangxi_Normal_University.svg/1200px-Jiangxi_Normal_University.svg.png' alt='Jiangxi Normal University' height='50px'>&emsp;
    <img src='https://i.postimg.cc/k5WpYj0r/SWJTULogo.png' alt='Southwest Jiaotong University Logo' height='50px'>&emsp;
</div>
-----------------

![](https://img.shields.io/badge/pixiu-v0.1-gold)
![](https://black.readthedocs.io/en/stable/_static/license.svg)
[![Discord](https://img.shields.io/discord/1146837080798933112)](https://discord.gg/HRWpUmKB)

[Pixiu Paper](https://arxiv.org/abs/2306.05443) | [FinBen Leaderboard](https://huggingface.co/spaces/finosfoundation/Open-Financial-LLM-Leaderboard)

**Descargo de responsabilidad**

Este repositorio y su contenido se proporcionan **únicamente con fines académicos y educativos**. Ninguno de los materiales constituye asesoramiento financiero, legal o de inversión. No se ofrecen garantías, explícitas o implícitas, respecto a la precisión, integridad o utilidad del contenido. Los autores y colaboradores no son responsables de errores, omisiones o cualquier consecuencia derivada del uso de la información aquí contenida. Los usuarios deben ejercer su propio juicio y consultar a profesionales antes de tomar cualquier decisión financiera, legal o de inversión. El uso del software e información contenida en este repositorio es bajo el propio riesgo del usuario.

**Al utilizar o acceder a la información de este repositorio, usted acepta indemnizar, defender y eximir de responsabilidad a los autores, colaboradores y cualquier organización o persona afiliada por cualquier reclamo o daño.**




**Puntos de control:** 

- [FinMA v0.1 (Full 7B version)](https://huggingface.co/ChanceFocus/finma-7b-full)

**Idiomas**

- [Inglés](README.md)
- [Español](README.es.md)

**documento**

- [PIXIU: A Comprehensive Benchmark, Instruction Dataset and Large Language Model for Finance](https://arxiv.org/abs/2306.05443)
- [The FinBen: An Holistic Financial Benchmark for Large Language Models](https://arxiv.org/abs/2402.12659)
- [No Language is an Island: Unifying Chinese and English in Financial Large Language Models, Instruction Data, and Benchmarks](https://arxiv.org/abs/2403.06249)
- [Dólares or Dollars? Unraveling the Bilingual Prowess of Financial LLMs Between Spanish and English](https://arxiv.org/abs/2402.07405)

**Evaluaciones** (más detalles en la sección FinBen):

- [flare (flare-es-financees)](https://huggingface.co/datasets/TheFinAI/flare-es-financees)
- [flare (flare-es-tsa)](https://huggingface.co/datasets/TheFinAI/flare-es-tsa)
- [flare (flare-es-fns)](https://huggingface.co/datasets/TheFinAI/flare-es-fns)
- [flare (flare-es-efpa)](https://huggingface.co/datasets/TheFinAI/flare-es-efpa)
- [flare (flare-es-efp)](https://huggingface.co/datasets/TheFinAI/flare-es-efp)
- [flare (flare-es-multifin)](https://huggingface.co/datasets/TheFinAI/flare-es-multifin)

## Descripción general

**FinBen_ES** es una iniciativa fundamental enfocada en el dominio financiero español. FinBen_ES busca reforzar el progreso, perfeccionamiento y evaluación de Modelos de Lenguaje a Gran Escala (MLGs) diseñados específicamente para contextos financieros españoles. Como un segmento vital del esfuerzo más amplio de PIXIU, FinBen_ES se erige como un testimonio del compromiso por aprovechar las capacidades de los MLGs, asegurando que los profesionales y entusiastas financieros del mundo hispanohablante tengan a su disposición herramientas lingüísticas de primera categoría.

### Características clave

- **Recursos abiertos**: PIXIU proporciona abiertamente el LLM financiero, los datos de instrucción de ajuste fino y los conjuntos de datos incluidos en el conjunto de evaluación de referencia para fomentar la investigación abierta y la transparencia. 
- **Multitarea**: Los datos de instrucción y el conjunto de referencia en PIXIU cubren un diverso conjunto de tareas financieras, que incluyen cuatro tareas de NLP financiero y una tarea de predicción financiera.
- **Multimodalidad**: Los datos de instrucción y el conjunto de referencia de PIXIU consisten en datos financieros multimodales, que incluyen datos de series de tiempo de la tarea de predicción de movimientos de acciones. Cubre varios tipos de textos financieros, que incluyen informes, artículos de noticias, tweets y presentaciones regulatorias.
- **Diversidad**: A diferencia de conjuntos de referencia anteriores que se centran principalmente en tareas de NLP financiero, el conjunto de evaluación de referencia de PIXIU incluye tareas críticas de predicción financiera alineadas con escenarios del mundo real, lo que lo hace más desafiante.

---

## FinBen_ES: Conjunto de evaluación de comprensión y predicción del lenguaje financiero

En esta sección, proporcionamos un análisis de rendimiento detallado de FinMA en comparación con otros modelos líderes, incluyendo ChatGPT, GPT-4, lince-zero et al. Para este análisis, hemos elegido una gama de tareas y métricas que abarcan varios aspectos del Procesamiento del Lenguaje Natural financiero y de la predicción financiera.

### Tareas

| Datos                 | Tarea                          | Bruto  | Tipos de Datos                      | Modalidades       | Licencia        | Artículo |
| --------------------- | ------------------------------ | ------ | ----------------------------------- | ----------------- | --------------- | -------- |
| MultiFin              | clasificación de titulares     | 230    | titulares de noticias               | texto             | CC BY 4.0       | [1]      |
| FNS                   | respuesta a preguntas          | 50     | informes de ganancias               | texto             | Público         | [2]      |
| TSA                   | análisis de sentimientos       | 3,829  | titulares de noticias               | texto             | CC BY 4.0       | [3]      |
| Financees             | análisis de sentimientos       | 6,539  | titulares de noticias               | texto             | Público         | [4]      |
| EFP                   | respuesta a preguntas          | 37     | preguntas de evaluación empresarial | texto             | Público         |          |
| EFPA                  | respuesta a preguntas          | 228    | preguntas de evaluación empresarial | texto             | Público         |          |

1. Rasmus Jørgensen, Oliver Brandt, Mareike Hartmann, Xiang Dai, Christian Igel, and Desmond Elliott. 2023. MultiFin: A Dataset for Multilingual Financial NLP. In Findings of the Association for Computational Linguistics: EACL 2023, 894–909. Association for Computational Linguistics, Dubrovnik, Croatia.
2. [FNS 2023. FNP 2023.](http://wp.lancs.ac.uk/cfie/fns2023/).
3. Pan R, García-Díaz JA, Garcia-Sanchez F, and Valencia-García R. 2023. Evaluation of transformer models for financial targeted sentiment analysis in Spanish. In PeerJ Computer Science, 9:e1377. https://doi.org/10.7717/peerj-cs.1377.
4. CodaLab. 2023. [Competition](https://codalab.lisn.upsaclay.fr/competitions/10052)


### Evaluación

#### Preparación
##### Instalación local
```bash
git clone https://github.com/TheFinAI/PIXIU.git --recursive
cd PIXIU
pip install -r requirements.txt
cd PIXIU/src/financial-evaluation
pip install -e .[multilingual]
```
##### Imagen de Docker
```bash
sudo bash scripts/docker_run.sh
```
El comando anterior inicia un contenedor docker, puede modificar docker_run.sh para adaptarlo a su entorno. Proporcionamos una imagen precompilada ejecutando sudo docker pull tothemoon/pixiu:latest

```bash
docker run --gpus all --ipc=host --ulimit memlock=-1 --ulimit stack=67108864 \
    --network host \
    --env https_proxy=$https_proxy \
    --env http_proxy=$http_proxy \
    --env all_proxy=$all_proxy \
    --env HF_HOME=$hf_home \
    -it [--rm] \
    --name pixiu \
    -v $pixiu_path:$pixiu_path \
    -v $hf_home:$hf_home \
    -v $ssh_pub_key:/root/.ssh/authorized_keys \
    -w $workdir \
    $docker_user/pixiu:$tag \
    [--sshd_port 2201 --cmd "echo 'Hello, world!' && /bin/bash"]
```
Argumentos de explicación:
- `[]` significa argumentos ignorables
- `HF_HOME`: directorio de caché huggingface
- `sshd_port`: puerto sshd del contenedor, puede ejecutar `ssh -i private_key -p $sshd_port root@$ip` para conectarse al contenedor, el valor predeterminado es 22001
- `--rm`: elimina el contenedor al salir del contenedor (es decir,`CTRL + D`)

#### Evaluación automatizada de tareas
Antes de la evaluación, descargue el [punto de control BART](https://drive.google.com/u/0/uc?id=1_7JfF7KOInb7ZrxKHIigTMR4ChVET01m&export=download) en `src/metrics/BARTScore/bart_score.pth`.

Para la evaluación automatizada, siga estas instrucciones:

1. Transformador Huggingface

   Para evaluar un modelo alojado en HuggingFace Hub (por ejemplo, finma-7b-full), use este comando:

```bash
python eval.py \
    --model "hf-causal-llama" \
    --model_args "use_accelerate=True,pretrained=chancefocus/finma-7b-full,tokenizer=chancefocus/finma-7b-full,use_fast=False" \
    --tasks "flare_ner,flare_sm_acl,flare_fpb"
```

Puede encontrar más detalles en la documentación de [lm_eval](https://github.com/EleutherAI/lm-evaluation-harness).

2. API comerciales


Tenga en cuenta que para tareas como NER, la evaluación automatizada se basa en un patrón específico. Esto podría no extraer información relevante en entornos de cero disparos, dando como resultado un rendimiento relativamente más bajo en comparación con los resultados anteriores anotados manualmente.

```bash
export OPENAI_API_SECRET_KEY=YOUR_KEY_HERE
python eval.py \
    --model gpt-4 \
    --tasks flare_ner,flare_sm_acl,flare_fpb
```

---


## License

PIXIU tiene licencia [MIT]. Para más detalles, consulte el archivo [MIT](LICENSE).

## Historial de estrellas

[![Star History Chart](https://api.star-history.com/svg?repos=The-FinAI/PIXIU&type=Date)](https://star-history.com/#The-FinAI/PIXIU&Date)

